(function(){"use strict";var t={8681:function(t,e,n){var l=n(9242),i=n(3396);const s={class:"wrapper"};function a(t,e){const n=(0,i.up)("cc-navbar"),l=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i.Wm)(n),(0,i.Wm)(l)])}var u=n(89);const o={},r=(0,u.Z)(o,[["render",a]]);var c=r,p=n(2483),d=n(7139);const m={class:"calculator"},_={class:"calculator__container"},v=(0,i._)("h1",{class:"calculator__title"}," Рассчитайте стоимость автомобиля в лизинг ",-1),g={class:"calculator__inputs"},h={class:"calculator__results"},f={class:"calculator__submit"};function y(t,e,n,l,s,a){const u=(0,i.up)("cc-input"),o=(0,i.up)("cc-result"),r=(0,i.up)("cc-button");return(0,i.wg)(),(0,i.iD)("section",m,[(0,i._)("div",_,[v,(0,i._)("div",g,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.inputs,(t=>((0,i.wg)(),(0,i.j4)(u,{key:t.type,input:t},{"input-title":(0,i.w5)((()=>[(0,i.Uk)((0,d.zw)(t.title),1)])),_:2},1032,["input"])))),128))]),(0,i._)("div",h,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.results,(t=>((0,i.wg)(),(0,i.j4)(o,{result:t,key:t.type},null,8,["result"])))),128)),(0,i._)("div",f,[(0,i.Wm)(r,{onClick:a.submitCalc,disabled:t.isSending,class:(0,d.C_)({calculator__submit_loading:t.isSending})},{default:(0,i.w5)((()=>[(0,i.Uk)("Оставить заявку")])),_:1},8,["onClick","disabled","class"])])])])])}const b={class:"input__title"},w={class:"input__body"},S=["disabled"],k=(0,i._)("span",{class:"input__text_percent"}," ₽",-1),C=["disabled"],D=["min","max","disabled"];function x(t,e,n,s,a,u){return(0,i.wg)(),(0,i.iD)("div",{class:(0,d.C_)(["input",{input_disabled:t.isSending}])},[(0,i._)("h2",b,[(0,i.WI)(t.$slots,"input-title",{tag:"p"})]),(0,i._)("div",w,["%"!==n.input.type?(0,i.wy)(((0,i.wg)(),(0,i.iD)("input",{key:0,type:"tel",class:"input__text","onUpdate:modelValue":e[0]||(e[0]=t=>a.localValue=t),onKeydown:e[1]||(e[1]=(...t)=>u.preventEnter&&u.preventEnter(...t)),disabled:t.isSending},null,40,S)),[[l.nr,a.localValue,void 0,{lazy:!0}]]):"%"===n.input.type?((0,i.wg)(),(0,i.iD)("div",{key:1,class:"input__text",ref:"inputText",onClick:e[6]||(e[6]=(...e)=>t.$refs.percentInput.focus&&t.$refs.percentInput.focus(...e))},[(0,i._)("span",null,(0,d.zw)(u.initialFee),1),k,(0,i.wy)((0,i._)("input",{type:"tel",class:"input__percent","onUpdate:modelValue":e[2]||(e[2]=t=>a.localValue=t),onKeydown:e[3]||(e[3]=(...t)=>u.preventEnter&&u.preventEnter(...t)),onFocus:e[4]||(e[4]=(...t)=>u.toggleActive&&u.toggleActive(...t)),onBlur:e[5]||(e[5]=(...t)=>u.toggleActive&&u.toggleActive(...t)),disabled:t.isSending,ref:"percentInput"},null,40,C),[[l.nr,a.localValue,void 0,{lazy:!0}]])],512)):(0,i.kq)("",!0),(0,i.wy)((0,i._)("input",{class:(0,d.C_)(["input__slider",{input__slider_disabled:t.isSending}]),type:"range",min:n.input.min,max:n.input.max,"onUpdate:modelValue":e[7]||(e[7]=t=>a.valueSlider=t),disabled:t.isSending},null,10,D),[[l.nr,a.valueSlider]]),(0,i._)("div",{class:(0,d.C_)(["input__type",{input__type_small:"%"===n.input.type}])},(0,d.zw)(n.input.type),3)])],2)}var O=n(65);const j={props:{input:{type:Object,required:!0}},data(){return{localValue:0,valueSlider:0}},methods:{...(0,O.OI)({setInputs:"calculator/setInputs",setResults:"calculator/setResults"}),...(0,O.nv)({considerResult:"calculator/considerResult"}),preventEnter(t){13==t.keyCode&&t.preventDefault()},toggleActive(){this.$refs.inputText.classList.toggle("input__text_active")},formatToString(t){return t.toString().replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1 ")},formatToNumber(t){return Number(t.replace(/\s/g,""))},updateInputs(t){let e=this.inputs;this.inputs.forEach(((n,l)=>{n.type===this.input.type&&(t<this.input.min?this.localValue=t=this.input.min:t>this.input.max&&(this.localValue=t=this.input.max),e[l].value=t,void 0!=n.result&&(e[l].result=this.formatToNumber(this.initialFee)),this.localValue=this.formatToString(this.localValue),this.setInputs(e),this.considerResult())}))}},mounted(){this.localValue=this.formatToString(this.input.value),this.valueSlider=this.input.value},computed:{...(0,O.rn)({inputs:t=>t.calculator.inputs,results:t=>t.calculator.results,isSending:t=>t.calculator.isSending}),...(0,O.Se)({monthlyPayment:"calculator/monthlyPayment",leasingAmount:"calculator/leasingAmount"}),initialFee(){return this.formatToString(Math.round(this.inputs[0].value*(this.input.value/100)))}},watch:{localValue(t){this.updateInputs(this.formatToNumber(t)),this.valueSlider=this.formatToNumber(this.localValue)},valueSlider(t){this.localValue=this.formatToString(t)}}},I=()=>{(0,l.sj)((t=>({"96c6df28":t.input.max,"96c6dd4c":t.input.min,"0038da79":t.input.value})))},V=j.setup;j.setup=V?(t,e)=>(I(),V(t,e)):I;var T=j;const P=(0,u.Z)(T,[["render",x]]);var A=P;const R={class:"result"},B={class:"result__title"},z={class:"result__value"};function E(t,e,n,l,s,a){return(0,i.wg)(),(0,i.iD)("div",R,[(0,i._)("h2",B,(0,d.zw)(n.result.title),1),(0,i._)("div",z,(0,d.zw)(n.result.value)+" ₽",1)])}var U={props:{result:{type:Object,required:!0}}};const $=(0,u.Z)(U,[["render",E]]);var K=$;const Z={class:"button-ui"};function M(t,e,n,l,s,a){return(0,i.wg)(),(0,i.iD)("button",Z,[(0,i.WI)(t.$slots,"default")])}var N={name:"cc-button"};const F=(0,u.Z)(N,[["render",M]]);var W=F,Y={components:{CcInput:A,CcResult:K,CcButton:W},computed:{...(0,O.rn)({inputs:t=>t.calculator.inputs,results:t=>t.calculator.results,isSending:t=>t.calculator.isSending})},methods:{submitCalc(){this.setBoolSending(!0),this.sendData()},...(0,O.OI)({setBoolSending:"calculator/setBoolSending"}),...(0,O.nv)({sendData:"calculator/sendData"})}};const H=(0,u.Z)(Y,[["render",y]]);var q=H,J=n.p+"img/loading.db8068a5.svg";const L={class:"calculator"},G={class:"calculator__container"},Q=(0,i._)("h1",{class:"calculator__title"}," Рассчитайте стоимость автомобиля в лизинг ",-1),X={class:"calculator__inputs"},tt={class:"calculator__results"},et={class:"calculator__submit"},nt=(0,i._)("img",{src:J,alt:"Loading"},null,-1);function lt(t,e,n,l,s,a){const u=(0,i.up)("cc-input"),o=(0,i.up)("cc-result"),r=(0,i.up)("cc-button");return(0,i.wg)(),(0,i.iD)("section",L,[(0,i._)("div",G,[Q,(0,i._)("div",X,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.inputs,(t=>((0,i.wg)(),(0,i.j4)(u,{key:t.type,input:t},{"input-title":(0,i.w5)((()=>[(0,i.Uk)((0,d.zw)(t.title),1)])),_:2},1032,["input"])))),128))]),(0,i._)("div",tt,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.results,(t=>((0,i.wg)(),(0,i.j4)(o,{result:t,key:t.type},null,8,["result"])))),128)),(0,i._)("div",et,[t.isSending?((0,i.wg)(),(0,i.j4)(r,{key:0,onClick:a.submitCalc,disabled:"",class:(0,d.C_)({calculator__submit_disabled:t.isSending})},{default:(0,i.w5)((()=>[nt])),_:1},8,["onClick","class"])):((0,i.wg)(),(0,i.j4)(r,{key:1,onClick:a.submitCalc},{default:(0,i.w5)((()=>[(0,i.Uk)("Оставить заявку")])),_:1},8,["onClick"]))])])])])}var it={components:{CcInput:A,CcResult:K,CcButton:W},computed:{...(0,O.rn)({inputs:t=>t.calculator.inputs,results:t=>t.calculator.results,isSending:t=>t.calculator.isSending})},methods:{submitCalc(){this.setBoolSending(!0),this.sendData()},...(0,O.OI)({setBoolSending:"calculator/setBoolSending"}),...(0,O.nv)({sendData:"calculator/sendData"})}};const st=(0,u.Z)(it,[["render",lt]]);var at=st;const ut=[{path:"/",name:"disabled",component:q},{path:"/loading",name:"loading",component:at}],ot=(0,p.p7)({history:(0,p.PO)("/car-calculator/"),routes:ut});var rt=ot,ct=n(6265),pt=n.n(ct);const dt={state:()=>({inputs:[{title:"Стоимость автомобиля",min:1e6,max:6e6,type:"₽",value:1e6},{title:"Первоначальный взнос",min:10,max:60,type:"%",value:10,result:0},{title:"Срок лизинга",min:1,max:60,type:"мес.",value:1}],results:[],isSending:!1}),mutations:{setInputs(t,e){t.inputs=e},setResults(t,e){t.results=e},setBoolSending(t,e){t.isSending=e}},getters:{monthlyPayment(t){return{title:"Ежемесячный платеж от",type:"monthlyPayment",value:Math.round((t.inputs[0].value-t.inputs[1].result)*(.035*Math.pow(1.035,t.inputs[2].value)/(Math.pow(1.035,t.inputs[2].value)-1)))}},leasingAmount(t,e){return{title:"Сумма договора лизинга",type:"leasingAmount",value:t.inputs[1].result+t.inputs[2].value*e.monthlyPayment.value}}},actions:{considerResult({getters:t,commit:e}){e("setResults",[t.leasingAmount,t.monthlyPayment])},async sendData({state:t,getters:e}){console.log(t.isSending);const n="https://hookb.in/eK160jgYJ6UlaRPldJ1P",l=JSON.stringify({car_coast:t.inputs[0].value,initail_payment:t.inputs[1].result,initial_percent:t.inputs[1].value,lease_term:t.inputs[2].value,monthly_payment_from:e.monthlyPayment.value,total_sum:e.leasingAmount.value});try{const e=await pt().post(n,l,{headers:{"Content-Type":"application/json"}}),i=await e;console.log(i.status),t.isSending=await!1}catch(i){console.log(i),t.isSending=!1}}},namespaced:!0};var mt=(0,O.MT)({modules:{calculator:dt}});n(7658);const _t={class:"menu"},vt={class:"menu__body"},gt={class:"menu__list"};function ht(t,e,n,l,s,a){return(0,i.wg)(),(0,i.iD)("nav",_t,[(0,i._)("div",vt,[(0,i._)("ul",gt,[(0,i._)("li",{class:"menu__item",onClick:e[0]||(e[0]=e=>t.$router.push("/"))},"Disabled"),(0,i._)("li",{class:"menu__item",onClick:e[1]||(e[1]=e=>t.$router.push("/loading"))},"Loading")])])])}var ft={name:"cc-navbar"};const yt=(0,u.Z)(ft,[["render",ht]]);var bt=yt,wt=[W,bt];const St=(0,l.ri)(c);wt.forEach((t=>{St.component(t.name,t)})),St.use(mt).use(rt).mount("#app")}},e={};function n(l){var i=e[l];if(void 0!==i)return i.exports;var s=e[l]={exports:{}};return t[l](s,s.exports,n),s.exports}n.m=t,function(){var t=[];n.O=function(e,l,i,s){if(!l){var a=1/0;for(c=0;c<t.length;c++){l=t[c][0],i=t[c][1],s=t[c][2];for(var u=!0,o=0;o<l.length;o++)(!1&s||a>=s)&&Object.keys(n.O).every((function(t){return n.O[t](l[o])}))?l.splice(o--,1):(u=!1,s<a&&(a=s));if(u){t.splice(c--,1);var r=i();void 0!==r&&(e=r)}}return e}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[l,i,s]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var l in e)n.o(e,l)&&!n.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:e[l]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.p="/car-calculator/"}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,l){var i,s,a=l[0],u=l[1],o=l[2],r=0;if(a.some((function(e){return 0!==t[e]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(o)var c=o(n)}for(e&&e(l);r<a.length;r++)s=a[r],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(c)},l=self["webpackChunkcar_calc"]=self["webpackChunkcar_calc"]||[];l.forEach(e.bind(null,0)),l.push=e.bind(null,l.push.bind(l))}();var l=n.O(void 0,[998],(function(){return n(8681)}));l=n.O(l)})();
//# sourceMappingURL=app.d7d5b0de.js.map